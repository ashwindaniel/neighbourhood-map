var map,infowindow,bounds,initialSpaces=[{name:"Aspire Systems",location:{lat:12.8370922,lng:80.2200543},fs_id:"4cac25192f08236a4a7d8961"},{name:"Chennai Central",location:{lat:13.0834352,lng:80.2739593},fs_id:"5624c11e498eec470ec9d53e"},{name:"ITC Grand Chola",location:{lat:13.0105896,lng:80.2185199},fs_id:"4d848e465ad3a0932c8dd1fd"},{name:"Phoenix Marketcity",location:{lat:12.992312,lng:80.2148427},fs_id:"4fe16257e4b0e4cc311bb9ab"},{name:"Radiance Shine",location:{lat:12.821473,lng:80.2278703},fs_id:"55b7676d498e4a3a0deab767"},{name:"Marina Beach",location:{lat:13.0515508,lng:80.2747073},fs_id:"4d046ec926adb1f721c3d270"},{name:"SRM Institute of Science And Technology",location:{lat:12.822947,lng:80.0457755},fs_id:"4e12c7047d8b4d5613e67466"},{name:"MGM Dizzee World",location:{lat:12.8477897,lng:80.2026093},fs_id:"4d3fd175cb84b60c2a9680ab"}],BaseUrl="https://api.foursquare.com/v2/venues/",fsClient_id="client_id=SQLKBY0UUMKLO02QLERQVZD0A1GFMPVNTH4L1BVLNU3EOS45",fsClient_secret="&client_secret=ULIZPEN1HT5SN43B54WT5JQXJGKKSO1ZIK0HE4XY3ZJADQX5",fsVersion="&v=20161507";function googleSuccess(){"use strict";new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(0,32);var mapOptions={center:{lat:12.9999459,lng:80.2003777},zoom:11,styles:[{featureType:"landscape",stylers:[{hue:"#FFBB00"},{saturation:43.400000000000006},{lightness:37.599999999999994},{gamma:1}]},{featureType:"road.highway",stylers:[{hue:"#FFC200"},{saturation:-61.8},{lightness:45.599999999999994},{gamma:1}]},{featureType:"road.arterial",stylers:[{hue:"#FF0300"},{saturation:-100},{lightness:51.19999999999999},{gamma:1}]},{featureType:"road.local",stylers:[{hue:"#FF0300"},{saturation:-100},{lightness:52},{gamma:1}]},{featureType:"water",stylers:[{hue:"#0078FF"},{saturation:-13.200000000000003},{lightness:2.4000000000000057},{gamma:1}]},{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};map=new google.maps.Map(document.getElementById("map"),mapOptions),infowindow=new google.maps.InfoWindow({maxWidth:150,content:""}),bounds=new google.maps.LatLngBounds,map.addListener("click",function(){infowindow.close(infowindow)}),window.onresize=function(){map.fitBounds(bounds)};var Space=function(data,id,map){this.name=ko.observable(data.name),this.location=data.location,this.marker="",this.markerId=id,this.fs_id=data.fs_id,this.shortUrl="",this.photoUrl=""};ko.applyBindings(new function(){var self=this;this.isNavClosed=ko.observable(!0),this.navClick=function(){this.isNavClosed(!this.isNavClosed())},this.spaceList=ko.observableArray(),initialSpaces.forEach(function(item){self.spaceList.push(new Space(item))}),this.spaceList().forEach(function(space){var marker=new google.maps.Marker({map:map,position:space.location,animation:google.maps.Animation.DROP});space.marker=marker,bounds.extend(marker.position),marker.addListener("click",function(e){map.panTo(this.position),map.panBy(0,-200),infowindow.setContent(function(space){var contentString="<h3>"+space.name+"</h3><br><div style='width:200px;min-height:120px'><img src=\""+space.photoUrl+'"></div><div><a href="'+space.shortUrl+'" target="_blank">More info in Foursquare</a><img src="img/foursquare_150.png">';return space.name.length>0?contentString:"Oops, Foursquare content not available."}(space)),infowindow.open(map,marker),function(marker){null!==marker.getAnimation()?marker.setAnimation(null):(marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){marker.setAnimation(null)},700))}(marker)})}),self.getFoursquareData=ko.computed(function(){self.spaceList().forEach(function(space){var venueId=space.fs_id+"/?",foursquareUrl=BaseUrl+venueId+fsClient_id+fsClient_secret+fsVersion;$.ajax({type:"GET",url:foursquareUrl,dataType:"json",cache:!1,success:function(data){var response=data.response?data.response:"";response.venue&&data.venue,space.name=response.venue.name,space.shortUrl=response.venue.shortUrl,space.photoUrl=response.venue.bestPhoto.prefix+"height150"+response.venue.bestPhoto.suffix}})})}),this.itemClick=function(space){space.markerId,google.maps.event.trigger(space.marker,"click")},self.filter=ko.observable(""),this.filteredSpaceList=ko.dependentObservable(function(){var q=this.filter().toLowerCase();return q?ko.utils.arrayFilter(this.spaceList(),function(item){return item.name.toLowerCase().indexOf(q)>=0||(item.marker.setVisible(!1),!1)}):ko.utils.arrayFilter(self.spaceList(),function(item){return item.marker.setVisible(!0),!0})},this)})}var mapError=function(){document.getElementById("map-error").style.display="block",document.getElementById("map-error").innerHTML="Sorry, something went wrong. Please try again later."};